{
  "project": "enhance-issue-command",
  "issueNumber": 3,
  "branchName": "ai/issue-3-enhance-issue-command",
  "description": "Enhance /issue command: post plan to GitHub + structured plan format",
  "generatedAt": "2026-02-01T00:00:00Z",
  "status": "approved",
  "userStories": [
    {
      "id": "US-001",
      "phase": 1,
      "priority": 1,
      "title": "Add Required Plan Format section to planning-guide.md",
      "description": "Add a new section at the top of planning-guide.md (after the intro, before 'The Ralph Pattern') that defines the required markdown format for plans written during plan mode. This format must be parseable for transformation to prd.json.",
      "files": [
        ".claude/rules/planning-guide.md"
      ],
      "dependsOn": [],
      "acceptanceCriteria": [
        "planning-guide.md contains '## Required Plan Format for Plan Mode' section",
        "Section includes complete markdown template with all required fields",
        "Template shows Priority, Files, Depends On, Description, Acceptance Criteria, Verify Commands for each task"
      ],
      "verifyCommands": [
        "grep -q '## Required Plan Format' .claude/rules/planning-guide.md",
        "grep -q '### US-' .claude/rules/planning-guide.md"
      ],
      "passes": true,
      "attempts": 1,
      "lastAttempt": "2026-02-01T00:00:00Z"
    },
    {
      "id": "US-002",
      "phase": 1,
      "priority": 2,
      "title": "Restructure Step 4 in issue.md with explicit sub-steps",
      "description": "Rewrite Step 4 (Planning Phase) in issue.md to have explicit sub-steps 4a-4f, adding new steps for posting plan to GitHub (4b) and transforming plan to prd.json (4d).",
      "files": [
        ".claude/commands/issue.md"
      ],
      "dependsOn": [
        "US-001"
      ],
      "acceptanceCriteria": [
        "Step 4 has sub-steps 4a through 4f",
        "Step 4a references planning-guide.md for required format",
        "Step 4b includes 'gh issue comment' command to post plan",
        "Step 4d includes field mapping table (plan field → prd.json field)",
        "Step 4e posts '## ✅ Plan Approved' comment"
      ],
      "verifyCommands": [
        "grep -q '#### 4a:' .claude/commands/issue.md",
        "grep -q '#### 4b:' .claude/commands/issue.md",
        "grep -q '#### 4c:' .claude/commands/issue.md",
        "grep -q '#### 4d:' .claude/commands/issue.md",
        "grep -q '#### 4e:' .claude/commands/issue.md",
        "grep -q '#### 4f:' .claude/commands/issue.md",
        "grep -q 'gh issue comment' .claude/commands/issue.md"
      ],
      "passes": false,
      "attempts": 0,
      "lastAttempt": null
    }
  ],
  "globalVerifyCommands": [
    "grep -q '## Required Plan Format' .claude/rules/planning-guide.md",
    "grep -q '#### 4f:' .claude/commands/issue.md"
  ]
}
