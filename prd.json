{
  "project": "implement-workflow-enforcement",
  "issueNumber": 7,
  "branchName": "ai/issue-7-implement-workflow-enforcement",
  "description": "Bug: /implement workflow steps not being followed",
  "generatedAt": "2026-02-03T04:25:00Z",
  "status": "approved",
  "userStories": [
    {
      "id": "US-001",
      "phase": 1,
      "priority": 1,
      "title": "Restructure implement.md to enforce loop mode as default",
      "description": "Reorganize the command flow so that loop mode is the unmissable default. Move the 'Loop Mode' section to execute FIRST (before any interactive logic). Add explicit 'STOP' instruction if no argument matches loop mode.",
      "files": [
        ".claude/commands/implement.md"
      ],
      "dependsOn": [],
      "acceptanceCriteria": [
        "Loop mode section appears before interactive mode in Step 0b",
        "Default (no args) immediately triggers 'Launch Background Script' steps",
        "Explicit language: 'You MUST launch the background script unless user specified single or task'"
      ],
      "verifyCommands": [
        "grep -n 'MUST launch' .claude/commands/implement.md | head -1",
        "grep -n 'Loop Mode' .claude/commands/implement.md | head -1"
      ],
      "passes": true,
      "attempts": 1,
      "lastAttempt": "2026-02-03T03:18:59Z"
    },
    {
      "id": "US-002",
      "phase": 1,
      "priority": 2,
      "title": "Add CRITICAL enforcement section for GitHub posting",
      "description": "Add a new 'CRITICAL REQUIREMENTS' section at the top of implement.md that lists non-negotiable actions. Include task log posting and discovery notes. Use MUST/REQUIRED/CRITICAL language. Add explicit checklist format.",
      "files": [
        ".claude/commands/implement.md"
      ],
      "dependsOn": [
        "US-001"
      ],
      "acceptanceCriteria": [
        "CRITICAL REQUIREMENTS section exists near the top of the file",
        "Section explicitly states task logs MUST be posted to GitHub",
        "Section explicitly states discovery notes MUST be posted when patterns found",
        "Uses checklist format with MUST DO items"
      ],
      "verifyCommands": [
        "grep -c 'CRITICAL REQUIREMENTS' .claude/commands/implement.md",
        "grep -c 'MUST.*post.*task log' .claude/commands/implement.md",
        "grep -c 'MUST.*discovery note' .claude/commands/implement.md"
      ],
      "passes": true,
      "attempts": 1,
      "lastAttempt": "2026-02-03T03:20:01Z"
    },
    {
      "id": "US-003",
      "phase": 1,
      "priority": 3,
      "title": "Add post-task checklist enforcement",
      "description": "After each task completion (Step 7), add an explicit 'POST-TASK CHECKLIST' that MUST be completed before moving to next task. Include: verify commands, prd.json update, commit, task log to GitHub, discovery notes if applicable. Add a 'STOP - Do not proceed until ALL items checked' warning.",
      "files": [
        ".claude/commands/implement.md"
      ],
      "dependsOn": [
        "US-002"
      ],
      "acceptanceCriteria": [
        "POST-TASK CHECKLIST section exists after Step 7",
        "Checklist includes 'Post task log to GitHub' as mandatory item",
        "Checklist includes 'Post discovery notes if patterns found'",
        "Contains explicit 'Do not proceed until completed' warning"
      ],
      "verifyCommands": [
        "grep -c 'POST-TASK CHECKLIST' .claude/commands/implement.md",
        "grep -A 10 'POST-TASK CHECKLIST' .claude/commands/implement.md | grep -c 'GitHub'"
      ],
      "passes": true,
      "attempts": 1,
      "lastAttempt": "2026-02-03T03:21:04Z"
    },
    {
      "id": "US-004",
      "phase": 1,
      "priority": 4,
      "title": "Update Interactive Mode section with same enforcement",
      "description": "Ensure the interactive mode (/implement single) has the same GitHub posting requirements as loop mode. Add the same checklist and CRITICAL requirements reference. Make clear that interactive mode still requires all GitHub actions.",
      "files": [
        ".claude/commands/implement.md"
      ],
      "dependsOn": [
        "US-003"
      ],
      "acceptanceCriteria": [
        "Interactive mode section references the CRITICAL REQUIREMENTS",
        "Interactive mode includes same POST-TASK CHECKLIST requirement",
        "Clear statement that 'single' mode does NOT skip GitHub posting"
      ],
      "verifyCommands": [
        "grep -A 5 'single.*interactive' .claude/commands/implement.md | grep -i 'critical\\|must\\|checklist'"
      ],
      "passes": true,
      "attempts": 1,
      "lastAttempt": "2026-02-03T03:21:54Z"
    }
  ],
  "globalVerifyCommands": [
    "grep -c 'CRITICAL REQUIREMENTS' .claude/commands/implement.md",
    "grep -c 'POST-TASK CHECKLIST' .claude/commands/implement.md",
    "grep -c 'MUST' .claude/commands/implement.md"
  ],
  "debugState": {
    "status": "verified",
    "debugAttempts": 0,
    "debugHistory": []
  }
}
