{
  "permissions": {
    "allow": [
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(chmod:*)",
      "WebFetch(domain:github.com)",
      "Bash(curl:*)",
      "Bash(git init:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git fetch:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: comprehensive codebase improvements \\(Ralph Pattern\\)\n\nPriority 1 - Determinism & Workflow Hardening:\n- Add prerequisite validation \\(Step 0\\) to all commands\n- Remove hidden session context from issue.md \\(violates fresh context\\)\n- Add file locking to implement-loop.sh \\(prevents prd.json corruption\\)\n- Improve result tag parsing \\(case-insensitive, whitespace handling\\)\n- Fix error handling \\(replace || true with proper exit code capture\\)\n\nPriority 2 - Ralph Pattern Alignment:\n- Add archive strategy to issue-close.md \\(archive/YYYY-MM-DD-issue-N-slug/\\)\n- Add codebase patterns section to implement.md\n- Add priority field to prd.json schema in planning-guide.md\n- Update implement-loop.sh to respect priority field\n- Create AGENTS.md template for directory patterns\n\nPriority 3 - Portability:\n- Create .issueloop.config.json configuration file\n- Add platform detection to install.sh \\(macos/linux/windows\\)\n- Add system requirements section to README.md\n- Create Dockerfile for containerization\n- Create archive/.gitkeep placeholder\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(gh issue create --title \"Add /issue validate command to check workflow prerequisites\" --label \"AI\" --body \"$\\(cat <<''EOF''\n## Summary\n\nAdd a new `/issue validate` command that checks all prerequisites are properly configured before starting the workflow. This helps users catch setup issues early rather than failing mid-implementation.\n\n## What\n\nCreate a new command `.claude/commands/issue-validate.md` that:\n1. Checks all required tools are installed \\(gh, git, jq\\)\n2. Verifies gh CLI is authenticated\n3. Confirms we''re in a git repo with a GitHub remote\n4. Validates `.issueloop.config.json` exists and is valid JSON\n5. Checks if required labels exist on the repo\n6. Reports a summary of what''s ready vs what needs attention\n\n## Where\n\n- New file: `.claude/commands/issue-validate.md`\n- Update: `README.md` commands table to include the new command\n\n## Why\n\nUsers often hit cryptic errors when prerequisites aren''t met. A dedicated validation command provides:\n- Clear feedback on what''s missing\n- Actionable fix instructions\n- Confidence the workflow will run smoothly\n\n## Acceptance Criteria\n\n- [ ] `/issue validate` command exists and is documented\n- [ ] Command checks: gh installed, gh authenticated, git repo, GitHub remote, jq installed\n- [ ] Command checks: `.issueloop.config.json` exists and is valid\n- [ ] Command checks: required labels exist \\(AI, AI: Planning, etc.\\)\n- [ ] Output shows âœ… for passing checks, âŒ for failures with fix instructions\n- [ ] README.md commands table includes `/issue validate`\n\n## Scope\n\n- Only validation/checking - no auto-fix functionality\n- Focus on the checks defined in Step 0 Prerequisites across commands\n- Simple pass/fail output format\n\n## Example Output\n\n```\nðŸ” Validating Issue Loop Workflow Setup...\n\nTools:\n  âœ… gh CLI installed \\(v2.40.0\\)\n  âœ… gh authenticated as @mike-mauer\n  âœ… git installed \\(v2.39.0\\)\n  âœ… jq installed \\(v1.6\\)\n\nRepository:\n  âœ… Git repository detected\n  âœ… GitHub remote: mike-mauer/issues_loop\n  âœ… .issueloop.config.json found and valid\n\nLabels:\n  âœ… AI\n  âœ… AI: Planning\n  âœ… AI: Approved\n  âœ… AI: In Progress\n  âœ… AI: Testing\n  âœ… AI: Blocked\n  âœ… AI: Review\n  âœ… AI: Complete\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… All checks passed! Ready to use /issue workflow.\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\nEOF\n\\)\")",
      "Bash(gh label create:*)",
      "Bash(gh auth:*)",
      "Bash(git remote:*)",
      "Bash(gh issue view:*)",
      "Bash(gh issue create --title \"Enhance /issue command: post plan to GitHub + structured plan format\" --body \"$\\(cat <<''EOF''\n## Summary\nUpdate the `/issue` command to properly integrate native plan mode with the Ralph Pattern workflow. Currently, plans created in plan mode don''t get posted to GitHub issues or transformed into prd.json.\n\n## Background\nWhen `/issue N` invokes plan mode, the resulting plan should:\n1. Be posted to the GitHub issue as a `## ðŸ“‹ Implementation Plan` comment\n2. Follow a structured format that can be transformed to prd.json\n3. Trigger the approval â†’ prd.json â†’ /implement flow\n\nThis ensures the memory system \\(GitHub comments\\) captures the plan, and the implementation loop has proper state.\n\n## Requirements\n\n### 1. Define structured plan format\nPlans written during plan mode must follow this structure:\n```markdown\n# Implementation Plan: Issue #N - {title}\n\n## Overview\n{2-3 sentence approach}\n\n## Tasks\n\n### US-001: {title}\n**Priority:** 1\n**Files:** `path/to/file.ts`\n**Depends On:** None\n\n**Description:**\n{2-3 sentences}\n\n**Acceptance Criteria:**\n- [ ] {Verifiable criterion}\n\n**Verify Commands:**\n\\\\`\\\\`\\\\`bash\ncommand here\n\\\\`\\\\`\\\\`\n```\n\n### 2. Update `/issue` command Step 4\n- **4a:** Enter plan mode \\(existing\\)\n- **4b \\(NEW\\):** Post plan to GitHub as `## ðŸ“‹ Implementation Plan` comment\n- **4c:** Ask for approval\n- **4d:** Transform plan â†’ prd.json on approval\n- **4e:** Post `## âœ… Plan Approved` comment\n- **4f:** Prompt for `/implement`\n\n### 3. Add transformation logic\nParse the structured plan format and generate valid prd.json.\n\n## Acceptance Criteria\n- [ ] Plan format is documented in planning-guide.md\n- [ ] `/issue N` posts implementation plan comment to GitHub\n- [ ] `/issue N` generates prd.json from structured plan on approval\n- [ ] `/issue N` prompts user to run `/implement` after approval\n\n## Files to Modify\n- `.claude/commands/issue.md` - Update Step 4 flow\n- `.claude/rules/planning-guide.md` - Document required plan format\n\n## Out of Scope\n- Changes to `/implement` command\n- Changes to Pipedream automation\nEOF\n\\)\")",
      "Bash(git commit:*)",
      "Bash(gh issue comment:*)",
      "Bash(gh issue edit:*)",
      "Bash([ -f prd.json ])",
      "Bash(git checkout:*)",
      "Bash(gh pr create:*)"
    ]
  }
}
